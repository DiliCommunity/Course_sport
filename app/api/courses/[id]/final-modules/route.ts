import { NextRequest, NextResponse } from 'next/server'
import { createClient } from '@/lib/supabase/server'
import { getUserFromSession } from '@/lib/session-utils'
import { COURSE_IDS } from '@/lib/constants'

export const dynamic = 'force-dynamic'

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –º–æ–¥—É–ª–µ–π –∏–∑ page.tsx
// –î–ª—è –ö–µ—Ç–æ –∫—É—Ä—Å–∞
const ketoPaidModule4 = {
  moduleTitle: '–ú–æ–¥—É–ª—å 5: –ö–µ—Ç–æ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –∂–∏–∑–Ω–∏ –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö (12.5% –∫—É—Ä—Å–∞)',
  imageUrl: '/img/keto_full.jpg',
  lessons: [
    {
      id: '13',
      title: '–ö–µ—Ç–æ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö –∏ –∫–∞—Ñ–µ: —á—Ç–æ –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å',
      type: 'video',
      duration: 30,
      content: `**–ì–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ö:** "–Ø –Ω–µ —Å–º–æ–≥—É –µ—Å—Ç—å –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö –Ω–∞ –ö–µ—Ç–æ!"
**–†–µ–∞–ª—å–Ω–æ—Å—Ç—å:** –í 99% –∑–∞–≤–µ–¥–µ–Ω–∏–π –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –∫–µ—Ç–æ-–¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ –±–ª—é–¥–∞.

**üçΩÔ∏è –ß–¢–û –ó–ê–ö–ê–ó–´–í–ê–¢–¨ –í –†–ï–°–¢–û–†–ê–ù–ê–•:**

**–ò—Ç–∞–ª—å—è–Ω—Å–∫–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã:**
- –°–∞–ª–∞—Ç—ã (–¶–µ–∑–∞—Ä—å, –ö–∞–ø—Ä–µ–∑–µ) ‚Äî –±–µ–∑ —Å—É—Ö–∞—Ä–∏–∫–æ–≤
- –ú—è—Å–Ω—ã–µ –±–ª—é–¥–∞ (—Å—Ç–µ–π–∫, –∫—É—Ä–∏—Ü–∞ –≥—Ä–∏–ª—å)
- –ú–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã (–∫—Ä–µ–≤–µ—Ç–∫–∏, –ª–æ—Å–æ—Å—å)
- –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –æ–≤–æ—â–∏ –≤–º–µ—Å—Ç–æ –ø–∞—Å—Ç—ã/—Ä–∏—Å–∞
- –ò–∑–±–µ–≥–∞–π—Ç–µ: –ø–∞—Å—Ç–∞, –ø–∏—Ü—Ü–∞, —Ä–∏–∑–æ—Ç—Ç–æ

**–ê–∑–∏–∞—Ç—Å–∫–∏–µ —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã:**
- –°–∞—à–∏–º–∏, —Ç–µ—Ä–∏—è–∫–∏ (–±–µ–∑ —Ä–∏—Å–∞)
- –û–≤–æ—â–Ω—ã–µ –±–ª—é–¥–∞ –≤–æ–∫
- –ú—è—Å–Ω—ã–µ —à–∞—à–ª—ã—á–∫–∏
- –ü–æ–ø—Ä–æ—Å–∏—Ç–µ –±–µ–∑ —Å–æ—É—Å–æ–≤ —Å —Å–∞—Ö–∞—Ä–æ–º
- –ò–∑–±–µ–≥–∞–π—Ç–µ: —Ä–∏—Å, –ª–∞–ø—à–∞, —Å–ª–∞–¥–∫–∏–µ —Å–æ—É—Å—ã

**–ö–ê–ö –û–ë–©–ê–¢–¨–°–Ø –° –û–§–ò–¶–ò–ê–ù–¢–û–ú:**
- "–ú–æ–∂–Ω–æ –±–µ–∑ –≥–∞—Ä–Ω–∏—Ä–∞, —Ç–æ–ª—å–∫–æ –º—è—Å–æ/—Ä—ã–±–∞ –∏ –æ–≤–æ—â–∏?"
- "–ï—Å—Ç—å –ª–∏ –±–ª—é–¥–∞ –±–µ–∑ –ø–∞—Å—Ç—ã/—Ä–∏—Å–∞?"
- –ù–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å! –≠—Ç–æ –≤–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ.`,
      checklist: [
        '–ò–∑—É—á–∏—Ç–µ –º–µ–Ω—é –∑–∞—Ä–∞–Ω–µ–µ (—á–∞—Å—Ç–æ –µ—Å—Ç—å –æ–Ω–ª–∞–π–Ω)',
        '–í—ã–±–µ—Ä–∏—Ç–µ 2-3 –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –±–ª—é–¥–∞',
        '–ü–æ—Ç—Ä–µ–Ω–∏—Ä—É–π—Ç–µ—Å—å –∑–∞–∫–∞–∑—ã–≤–∞—Ç—å –±–µ–∑ —Å—Ç–µ—Å–Ω–µ–Ω–∏—è',
        '–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Å–ø–∏—Å–æ–∫ –∫–µ—Ç–æ-–¥—Ä—É–∂–µ–ª—é–±–Ω—ã—Ö –±–ª—é–¥ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–µ'
      ],
      bonus: {
        title: '–ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤',
        type: 'pdf',
        description: '–ì–æ—Ç–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã –∏ —Å–ø–∏—Å–∫–∏ –±–ª—é–¥ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–æ–≤'
      }
    },
    {
      id: '14',
      title: '–ö–µ—Ç–æ –≤ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏—è—Ö: –∫–∞–∫ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –∫–µ—Ç–æ–∑–µ',
      type: 'infographic',
      duration: 35,
      content: `**–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ ‚Äî –Ω–µ –ø–æ–≤–æ–¥ —Å—Ä—ã–≤–∞—Ç—å—Å—è!** –° –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ–¥–≥–æ—Ç–æ–≤–∫–æ–π –≤—ã –æ—Å—Ç–∞–Ω–µ—Ç–µ—Å—å –≤ –∫–µ—Ç–æ–∑–µ.

**‚úàÔ∏è –ü–ï–†–ï–õ–ï–¢–´:**

**–í —Å–∞–º–æ–ª–µ—Ç–µ:**
- –ó–∞–∫–∞–∂–∏—Ç–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ (–Ω–∏–∑–∫–æ—É–≥–ª–µ–≤–æ–¥–Ω–æ–µ, –µ—Å–ª–∏ –µ—Å—Ç—å)
- –ò–ª–∏ –≤–æ–∑—å–º–∏—Ç–µ —Å —Å–æ–±–æ–π: –æ—Ä–µ—Ö–∏, —Å—ã—Ä, –≤—è–ª–µ–Ω–æ–µ –º—è—Å–æ
- –ü–µ–π—Ç–µ –≤–æ–¥—É, –∏–∑–±–µ–≥–∞–π—Ç–µ —Å–æ–∫–æ–≤ –∏ –≥–∞–∑–∏—Ä–æ–≤–∫–∏

**–í –∞—ç—Ä–æ–ø–æ—Ä—Ç—É:**
- –°–∞–ª–∞—Ç—ã –≤ –∫–∞—Ñ–µ
- –Ø–π—Ü–∞, –±–µ–∫–æ–Ω (–µ—Å–ª–∏ –µ—Å—Ç—å –∑–∞–≤—Ç—Ä–∞–∫)
- –ö–æ—Ñ–µ —Å –∂–∏—Ä–Ω—ã–º–∏ —Å–ª–∏–≤–∫–∞–º–∏

**üõí –ü–û–ö–£–ü–ö–ò –í –ü–£–¢–ï–®–ï–°–¢–í–ò–ò:**
- –Ø–π—Ü–∞, —Å—ã—Ä, –∫–æ–ª–±–∞—Å–∞
- –û—Ä–µ—Ö–∏, —Å–µ–º–µ—á–∫–∏
- –ê–≤–æ–∫–∞–¥–æ, –æ–ª–∏–≤–∫–∏
- –ö–æ–Ω—Å–µ—Ä–≤—ã (—Ç—É–Ω–µ—Ü, —Å–∞—Ä–¥–∏–Ω—ã)`,
      bonus: {
        title: '–ö–µ—Ç–æ-–Ω–∞–±–æ—Ä –¥–ª—è –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–π',
        type: 'guide',
        description: '–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ç—Ä–∞–Ω'
      }
    },
    {
      id: '15',
      title: '–ü—Ä–∞–∑–¥–Ω–∏–∫–∏ –∏ –∑–∞—Å—Ç–æ–ª—å—è: –∫–∞–∫ –Ω–µ —Å–æ—Ä–≤–∞—Ç—å—Å—è',
      type: 'text',
      duration: 25,
      content: `**–ü—Ä–∞–∑–¥–Ω–∏–∫–∏ ‚Äî —Å–∞–º–æ–µ —Å–ª–æ–∂–Ω–æ–µ –≤—Ä–µ–º—è.** –ù–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∂–∏—Ç—å –∏—Ö –±–µ–∑ —Å—Ä—ã–≤–∞!

**üéâ –°–¢–†–ê–¢–ï–ì–ò–ò:**

**1. –ï—à—å—Ç–µ –î–û –∑–∞—Å—Ç–æ–ª—å—è:**
- –ü–ª–æ—Ç–Ω—ã–π –∫–µ—Ç–æ-–æ–±–µ–¥ –∑–∞ 2-3 —á–∞—Å–∞ –¥–æ
- –¢–∞–∫ –≤—ã –ø—Ä–∏–¥–µ—Ç–µ —Å—ã—Ç—ã–º

**2. –í—ã–±–∏—Ä–∞–π—Ç–µ –∫–µ—Ç–æ-–¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ:**
- –ú—è—Å–Ω—ã–µ –Ω–∞—Ä–µ–∑–∫–∏, —Å—ã—Ä—ã
- –û–≤–æ—â–Ω—ã–µ —Å–∞–ª–∞—Ç—ã (–±–µ–∑ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è)
- –†—ã–±–∞, –º–æ—Ä–µ–ø—Ä–æ–¥—É–∫—Ç—ã`,
      checklist: [
        '–ü–ª–∞–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–∞–∑–¥–Ω–∏–∫–∏ –∑–∞—Ä–∞–Ω–µ–µ',
        '–ï—à—å—Ç–µ –ø–µ—Ä–µ–¥ –∑–∞—Å—Ç–æ–ª—å–µ–º',
        '–í—ã–±–µ—Ä–∏—Ç–µ 2-3 –∫–µ—Ç–æ-–±–ª—é–¥–∞ –∏ –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ—Å—å –∏—Ö',
        '–ü–µ–π—Ç–µ –º–Ω–æ–≥–æ –≤–æ–¥—ã',
        '–ù–µ –∫–æ—Ä–∏—Ç–µ —Å–µ–±—è –∑–∞ –æ–¥–∏–Ω —Å—Ä—ã–≤'
      ]
    }
  ]
}

const ketoPaidModule5 = {
  moduleTitle: '–ú–æ–¥—É–ª—å 6: –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –ö–µ—Ç–æ –∏ –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π —É—Å–ø–µ—Ö (12.5% –∫—É—Ä—Å–∞)',
  imageUrl: '/img/keto_full2.jpg',
  lessons: [
    {
      id: '16',
      title: '–¶–µ–ª–µ–≤–æ–µ –∏ –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ö–µ—Ç–æ: –∫–æ–≥–¥–∞ –∏ –∑–∞—á–µ–º',
      type: 'video',
      duration: 40,
      content: `**–°–¢–ê–ù–î–ê–†–¢–ù–û–ï –ö–ï–¢–û:** 20-30–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ.
**–ù–û –ï–°–¢–¨ –í–ê–†–ò–ê–ù–¢–´!**

**üéØ –¶–ï–õ–ï–í–û–ï –ö–ï–¢–û (TKD):**
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–µ—Ç–æ –≤–µ—Å—å –¥–µ–Ω—å
- 20-30–≥ –±—ã—Å—Ç—Ä—ã—Ö —É–≥–ª–µ–≤–æ–¥–æ–≤ –∑–∞ 30 –º–∏–Ω –î–û —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- –î–ª—è —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–Ω–∏—Ä—É—é—Ç—Å—è –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ

**üîÑ –¶–ò–ö–õ–ò–ß–ï–°–ö–û–ï –ö–ï–¢–û (CKD):**
- 5-6 –¥–Ω–µ–π —Å—Ç—Ä–æ–≥–æ–µ –∫–µ—Ç–æ
- 1-2 –¥–Ω—è "—É–≥–ª–µ–≤–æ–¥–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏"
- –î–ª—è –æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–æ–≤

**–ö–û–ì–î–ê –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**
- TKD: –µ—Å–ª–∏ —Ç—Ä–µ–Ω–∏—Ä—É–µ—Ç–µ—Å—å 4+ —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é
- CKD: —Ç–æ–ª—å–∫–æ –æ–ø—ã—Ç–Ω—ã–º, –æ—á–µ–Ω—å –∞–∫—Ç–∏–≤–Ω—ã–º —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞–º
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –∫–µ—Ç–æ: –≤—Å–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–º (90% –ª—é–¥–µ–π)`,
      checklist: [
        '–ù–∞—á–Ω–∏—Ç–µ —Å–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ –∫–µ—Ç–æ –º–∏–Ω–∏–º—É–º –º–µ—Å—è—Ü',
        '–ï—Å–ª–∏ –Ω—É–∂–Ω–∞ –±–æ–ª—å—à–∞—è —Å–∏–ª–∞ ‚Äî –ø–æ–ø—Ä–æ–±—É–π—Ç–µ TKD',
        'CKD —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö',
        '–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–µ—Å –∏ —ç–Ω–µ—Ä–≥–∏—é'
      ]
    }
  ]
}

// –î–ª—è –ò–Ω—Ç–µ—Ä–≤–∞–ª—å–Ω–æ–≥–æ –≥–æ–ª–æ–¥–∞–Ω–∏—è
const intervalPaidModule4 = {
  moduleTitle: '–ú–æ–¥—É–ª—å 5: üöÄ –ë–∏–æ—Ö–∞–∫–∏–Ω–≥ –∏ –°—É–ø–µ—Ä—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ IF (12.5% –∫—É—Ä—Å–∞)',
  imageUrl: '/img/if_full.jpg',
  lessons: [
    {
      id: '13',
      title: 'üß¨ –ê–≤—Ç–æ—Ñ–∞–≥–∏—è: –ö–∞–∫ –ó–∞–ø—É—Å—Ç–∏—Ç—å –ö–ª–µ—Ç–æ—á–Ω–æ–µ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏ –ó–∞–º–µ–¥–ª–∏—Ç—å –°—Ç–∞—Ä–µ–Ω–∏–µ',
      type: 'video',
      duration: 40,
      content: `**–≠–¢–û –¢–û–¢ –°–ê–ú–´–ô –°–ï–ö–†–ï–¢, –ó–ê –ö–û–¢–û–†–´–ô –í 2016 –ì–û–î–£ –î–ê–õ–ò –ù–û–ë–ï–õ–ï–í–°–ö–£–Æ –ü–†–ï–ú–ò–Æ! üèÜ**

**üî¨ –ß–¢–û –¢–ê–ö–û–ï –ê–í–¢–û–§–ê–ì–ò–Ø:**
–≠—Ç–æ "—Å–∞–º–æ–ø–æ–µ–¥–∞–Ω–∏–µ" –∫–ª–µ—Ç–æ–∫ ‚Äî –Ω–æ –≤ –•–û–†–û–®–ï–ú —Å–º—ã—Å–ª–µ! –ö–ª–µ—Ç–∫–∞ —Ä–∞–∑–±–∏—Ä–∞–µ—Ç —Å–≤–æ–π –º—É—Å–æ—Ä:
- –ü–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–µ –±–µ–ª–∫–∏ ‚Üí –ø–µ—Ä–µ—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤ —ç–Ω–µ—Ä–≥–∏—é
- –°—Ç–∞—Ä—ã–µ –æ—Ä–≥–∞–Ω–µ–ª–ª—ã ‚Üí –∑–∞–º–µ–Ω—è–µ—Ç –Ω–∞ –Ω–æ–≤—ã–µ
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ —Ä–∞–∫–æ–≤—ã–µ –∫–ª–µ—Ç–∫–∏ ‚Üí –£–ù–ò–ß–¢–û–ñ–ê–ï–¢!

**‚è∞ –ö–û–ì–î–ê –í–ö–õ–Æ–ß–ê–ï–¢–°–Ø:**
- 12-16 —á–∞—Å–æ–≤: –Ω–∞—á–∞–ª–æ –∞–≤—Ç–æ—Ñ–∞–≥–∏–∏
- 16-24 —á–∞—Å–∞: –ê–ö–¢–ò–í–ù–ê–Ø –∞–≤—Ç–æ—Ñ–∞–≥–∏—è üî•
- 24-48 —á–∞—Å–æ–≤: –ú–ê–ö–°–ò–ú–ê–õ–¨–ù–ê–Ø –∞–≤—Ç–æ—Ñ–∞–≥–∏—è`,
      checklist: [
        '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ 18-20 —á–∞—Å–æ–≤ –≥–æ–ª–æ–¥–∞–Ω–∏—è —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é',
        '–î–æ–±–∞–≤—å—Ç–µ –∑–µ–ª—ë–Ω—ã–π —á–∞–π —É—Ç—Ä–æ–º',
        '–¢—Ä–µ–Ω–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞—Ç–æ—â–∞–∫',
        '–ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω—ã–π –¥—É—à —É—Ç—Ä–æ–º'
      ]
    }
  ]
}

const intervalPaidModule5 = {
  moduleTitle: '–ú–æ–¥—É–ª—å 6: ü¶ã –ü–æ–ª–Ω–∞—è –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è ‚Äî –í–∞—à–∞ –ù–æ–≤–∞—è –ñ–∏–∑–Ω—å –ù–∞—á–∏–Ω–∞–µ—Ç—Å—è! (12.5% –∫—É—Ä—Å–∞)',
  imageUrl: '/img/if_full2.jpg',
  lessons: [
    {
      id: '16',
      title: 'üé¨ –í–∏–¥–µ–æ-—É—Ä–æ–∫: "–ú–æ—è –ò—Å—Ç–æ—Ä–∏—è –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏"',
      type: 'video',
      duration: 45,
      content: `**–ü–û–°–õ–ï–î–ù–ò–ô –®–ê–ì –ü–ï–†–ï–î –°–¢–ê–†–¢–û–ú! üéØ**

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–±—è ‚Äî –≥–æ—Ç–æ–≤—ã –ª–∏ –≤—ã –∫ –ø–æ–ª–Ω–æ–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏?

**‚úÖ –ú–ï–ù–¢–ê–õ–¨–ù–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨:**
- –Ø –ø–æ–Ω–∏–º–∞—é, —á—Ç–æ –ø–µ—Ä–≤—ã–µ 2 –Ω–µ–¥–µ–ª–∏ –±—É–¥—É—Ç —Å–ª–æ–∂–Ω—ã–º–∏
- –Ø –≥–æ—Ç–æ–≤ –Ω–µ —Å–¥–∞–≤–∞—Ç—å—Å—è
- –Ø –≤–µ—Ä—é, —á—Ç–æ –º–æ–µ —Ç–µ–ª–æ —Å–ø–æ—Å–æ–±–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è

**‚úÖ –ü–†–ê–ö–¢–ò–ß–ï–°–ö–ê–Ø –ü–û–î–ì–û–¢–û–í–ö–ê:**
- –Ø –≤—ã–±—Ä–∞–ª —Å–≤–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª (16/8, 18/6 –∏ —Ç.–¥.)
- –Ø –æ–ø—Ä–µ–¥–µ–ª–∏–ª –∏–¥–µ–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø–∏—Ç–∞–Ω–∏—è
- –Ø —É—Å—Ç–∞–Ω–æ–≤–∏–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞

**üéØ –ï–°–õ–ò –í–´ –û–¢–í–ï–¢–ò–õ–ò "–î–ê" ‚Äî –í–´ –ì–û–¢–û–í–´!**

**–í–ê–®–ê –ù–û–í–ê–Ø –ñ–ò–ó–ù–¨ –ñ–î–Å–¢ –í–ê–°! üí™üî•**`,
      checklist: [
        '‚úÖ –ü—Ä–æ–π–¥–∏—Ç–µ –≤–µ—Å—å —á–µ–∫-–ª–∏—Å—Ç –≤—ã—à–µ',
        'üìÖ –í—ã–±–µ—Ä–∏—Ç–µ –¥–∞—Ç—É —Å—Ç–∞—Ä—Ç–∞ (–º–∞–∫—Å–∏–º—É–º +3 –¥–Ω—è)',
        '‚è∞ –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ —Ç–æ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ–∫–Ω–∞ –ø–∏—Ç–∞–Ω–∏—è',
        'üí™ –î–ê–ô–¢–ï –°–ï–ë–ï –û–ë–ï–©–ê–ù–ò–ï –ù–ï –°–î–ê–í–ê–¢–¨–°–Ø 30 –î–ù–ï–ô!'
      ]
    }
  ]
}

const FINAL_MODULES_DATA: Record<string, any> = {
  [COURSE_IDS.KETO]: {
    module4: ketoPaidModule4,
    module5: ketoPaidModule5
  },
  [COURSE_IDS.INTERVAL]: {
    module4: intervalPaidModule4,
    module5: intervalPaidModule5
  }
}

// –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ —É–¥–∞–ª–µ–Ω—ã - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã—à–µ

export async function GET(
  request: NextRequest,
  { params }: { params: { id: string } }
) {
  try {
    const supabase = await createClient()
    const user = await getUserFromSession(supabase)

    if (!user) {
      return NextResponse.json(
        { error: 'Unauthorized' },
        { status: 401 }
      )
    }

    const courseId = params.id
    
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º –∫–∞–∫–æ–π —ç—Ç–æ –∫—É—Ä—Å (1 = keto, 2 = interval)
    const isKeto = courseId === '1' || courseId === COURSE_IDS.KETO
    const isInterval = courseId === '2' || courseId === COURSE_IDS.INTERVAL
    
    let modulesData = null
    
    if (isKeto) {
      modulesData = FINAL_MODULES_DATA[COURSE_IDS.KETO]
    } else if (isInterval) {
      modulesData = FINAL_MODULES_DATA[COURSE_IDS.INTERVAL]
    }

    if (!modulesData) {
      return NextResponse.json(
        { error: 'Course not found' },
        { status: 404 }
      )
    }

    return NextResponse.json(modulesData)

  } catch (error: any) {
    console.error('Final modules API error:', error)
    return NextResponse.json(
      { error: error.message || 'Internal server error' },
      { status: 500 }
    )
  }
}

