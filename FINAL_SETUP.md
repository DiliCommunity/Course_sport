# üéØ –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞: Neon PostgreSQL

## ‚úÖ –ß—Ç–æ —É–∂–µ —Å–¥–µ–ª–∞–Ω–æ:

1. ‚úÖ –°–æ–∑–¥–∞–Ω –∫–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Neon PostgreSQL (`lib/neon/db.ts`)
2. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ API routes
3. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `package.json` (–¥–æ–±–∞–≤–ª–µ–Ω `@neondatabase/serverless`)
4. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω `schema.sql` (–¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `sessions`)
5. ‚úÖ –£–±—Ä–∞–Ω—ã RLS –ø–æ–ª–∏—Ç–∏–∫–∏ (–Ω–µ –Ω—É–∂–Ω—ã –¥–ª—è Neon)

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°:

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç—å Neon –∫ –ø—Ä–æ–µ–∫—Ç—É

1. **Vercel Dashboard** ‚Üí **Storage**
2. –ù–∞–π–¥–∏—Ç–µ –±–∞–∑—É **`db-course-health`** (Neon - Free)
3. –ù–∞–∂–º–∏—Ç–µ **"Connect Project"**
4. –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
   - Project: –≤—ã–±–µ—Ä–∏—Ç–µ `course-sport`
   - Environments: ‚úÖ Development, ‚úÖ Preview, ‚úÖ Production
   - Environment Variable: `STORAGE_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - –ù–∞–∂–º–∏—Ç–µ **"Connect"**

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL —Å—Ö–µ–º—É

**–ì–¥–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –í Vercel Dashboard (–ø—Ä–æ—â–µ)
1. Storage ‚Üí `db-course-health` ‚Üí –æ—Ç–∫—Ä–æ–π—Ç–µ –±–∞–∑—É
2. –ù–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"SQL Editor"** –∏–ª–∏ **"Query"**
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ **–≤–µ—Å—å –∫–æ–¥** –∏–∑ —Ñ–∞–π–ª–∞ `supabase/schema.sql`
4. –í—Å—Ç–∞–≤—å—Ç–µ –≤ SQL Editor
5. –ù–∞–∂–º–∏—Ç–µ **"Run"** –∏–ª–∏ **"Execute"**

#### –í–∞—Ä–∏–∞–Ω—Ç B: –í Neon Dashboard
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ **neon.tech**
2. –í–æ–π–¥–∏—Ç–µ (–º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ Vercel)
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –±–∞–∑—É `db-course-health`
4. –û—Ç–∫—Ä–æ–π—Ç–µ **SQL Editor**
5. –í—Å—Ç–∞–≤—å—Ç–µ –∫–æ–¥ –∏–∑ `supabase/schema.sql`
6. –í—ã–ø–æ–ª–Ω–∏—Ç–µ

### –®–∞–≥ 3: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install @neondatabase/serverless
```

### –®–∞–≥ 4: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π

Vercel Dashboard ‚Üí Deployments ‚Üí –ø–æ—Å–ª–µ–¥–Ω–∏–π –¥–µ–ø–ª–æ–π ‚Üí **Redeploy**

## üìä –ß—Ç–æ –±—É–¥–µ—Ç –≤ –±–∞–∑–µ –ø–æ—Å–ª–µ SQL:

–¢–∞–±–ª–∏—Ü—ã:
- ‚úÖ `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- ‚úÖ `courses` - –∫—É—Ä—Å—ã
- ‚úÖ `categories` - –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- ‚úÖ `instructors` - –∏–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã
- ‚úÖ `lessons` - —É—Ä–æ–∫–∏
- ‚úÖ `enrollments` - –∑–∞–ø–∏—Å–∏ –Ω–∞ –∫—É—Ä—Å—ã
- ‚úÖ `user_balance` - –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ `referrals` - —Ä–µ—Ñ–µ—Ä–∞–ª—ã
- ‚úÖ `transactions` - —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ `sessions` - —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ `reviews` - –æ—Ç–∑—ã–≤—ã
- ‚úÖ `lesson_progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ —É—Ä–æ–∫–∞–º

## üí° –ü—Ä–∏–º–µ—Ä—ã SQL –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö:

### –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```sql
INSERT INTO users (name, email, password_hash) 
VALUES ('–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤', 'ivan@example.com', '$2a$10$...');
```

### –î–æ–±–∞–≤–∏—Ç—å –∫—É—Ä—Å:
```sql
INSERT INTO courses (title, description, short_description, price, image_url, category_id, instructor_id, duration_minutes, is_published)
VALUES (
  '–ö–µ—Ç–æ –î–∏–µ—Ç–∞ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö',
  '–ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ',
  '–ò–∑—É—á–∏ –æ—Å–Ω–æ–≤—ã',
  1500,
  '/img/keto.png',
  (SELECT id FROM categories LIMIT 1),
  (SELECT id FROM instructors LIMIT 1),
  1200,
  true
);
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ:
```sql
-- –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
SELECT * FROM users;

-- –í—Å–µ –∫—É—Ä—Å—ã
SELECT * FROM courses WHERE is_published = true;

-- –ë–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
SELECT * FROM user_balance WHERE user_id = 'user-id';
```

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
- ‚úÖ –£ –≤–∞—Å –±—É–¥–µ—Ç PostgreSQL –±–∞–∑–∞ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏
- ‚úÖ –ú–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ SQL
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ
- ‚úÖ –í—Å–µ –¥–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö PostgreSQL

## üîç –ì–¥–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å SQL –≤ –±—É–¥—É—â–µ–º:

1. **Vercel Dashboard** ‚Üí Storage ‚Üí –≤–∞—à–∞ –±–∞–∑–∞ ‚Üí SQL Editor
2. **Neon Dashboard** ‚Üí SQL Editor
3. –õ—é–±–æ–π PostgreSQL –∫–ª–∏–µ–Ω—Ç —Å `STORAGE_URL`
