# –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Upstash Redis

## ‚úÖ –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–º–µ—Å—Ç–æ Vercel KV?

–ù–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞—Ö –≤–∏–¥–Ω–æ, —á—Ç–æ –≤ Vercel –Ω–µ—Ç –ø—Ä—è–º–æ–≥–æ "KV", –Ω–æ –µ—Å—Ç—å:
1. **Edge Config Store** (`my-config-course-health`) - —ç—Ç–æ –∏ –µ—Å—Ç—å Vercel KV, –Ω–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
2. **Upstash** - Serverless Redis (–ª—É—á—à–∏–π –≤–∞—Ä–∏–∞–Ω—Ç!)
3. **Redis** - Serverless Redis (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: Upstash Redis

**–ü–æ—á–µ–º—É Upstash:**
- ‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Redis
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vercel
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ (10K –∫–æ–º–∞–Ω–¥/–¥–µ–Ω—å)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ API

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å Upstash Redis

1. –í Vercel Dashboard ‚Üí **Storage** ‚Üí **Create Database**
2. –í –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ –Ω–∞–π–¥–∏—Ç–µ **"Upstash"** (Serverless DB Redis)
3. –ù–∞–∂–º–∏—Ç–µ **"Continue"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ:
   - **Name**: `course-health-redis`
   - **Region**: –≤—ã–±–µ—Ä–∏—Ç–µ –±–ª–∏–∂–∞–π—à–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, `us-east-1`)
   - **Plan**: Free (–¥–ª—è –Ω–∞—á–∞–ª–∞)
5. –ù–∞–∂–º–∏—Ç–µ **"Create"**

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

1. –í —Å–æ–∑–¥–∞–Ω–Ω–æ–π Upstash –±–∞–∑–µ –Ω–∞–∂–º–∏—Ç–µ **"Connect Project"**
2. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ `course-sport` –∏ –≤—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
   - ‚úÖ Development
   - ‚úÖ Preview
   - ‚úÖ Production
4. –í **Advanced Options**:
   - Environment Variable: `UPSTASH_REDIS_REST_URL` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
   - Token: `UPSTASH_REDIS_REST_TOKEN` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
5. –ù–∞–∂–º–∏—Ç–µ **"Connect"**

### –®–∞–≥ 3: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–∏—Ç –≤ –ø—Ä–æ–µ–∫—Ç:
- `UPSTASH_REDIS_REST_URL` - URL –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `UPSTASH_REDIS_REST_TOKEN` - —Ç–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø–∞

–≠—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –≤–æ –≤—Å–µ—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è—Ö.

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install @upstash/redis
```

### –®–∞–≥ 5: –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–¥

–ù—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å `@vercel/kv` –Ω–∞ `@upstash/redis` –≤:
- `lib/vercel/kv.ts` - –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –í—Å–µ API routes, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç KV

## üîÑ –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Edge Config Store

–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–∂–µ —Å–æ–∑–¥–∞–Ω–Ω—ã–π `my-config-course-health`:
- –≠—Ç–æ –∏ –µ—Å—Ç—å Vercel KV
- –ù–æ –æ–Ω –±–æ–ª–µ–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω (—Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –Ω–∞ Edge)
- –î–ª—è –ø—Ä–æ—Å—Ç—ã—Ö key-value –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ–¥–æ–π–¥–µ—Ç
- –ù—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `@vercel/edge-config` –≤–º–µ—Å—Ç–æ `@vercel/kv`

## üìù –ß—Ç–æ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤ –∫–æ–¥–µ:

1. –ó–∞–º–µ–Ω–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã:
   ```typescript
   // –ë—ã–ª–æ:
   import { kv } from '@vercel/kv'
   
   // –°—Ç–∞–Ω–µ—Ç:
   import { Redis } from '@upstash/redis'
   const redis = new Redis({
     url: process.env.UPSTASH_REDIS_REST_URL!,
     token: process.env.UPSTASH_REDIS_REST_TOKEN!,
   })
   ```

2. –ú–µ—Ç–æ–¥—ã –æ—Å—Ç–∞—é—Ç—Å—è –ø–æ—Ö–æ–∂–∏–º–∏:
   ```typescript
   // –ë—ã–ª–æ:
   await kv.set('key', 'value')
   await kv.get('key')
   
   // –°—Ç–∞–Ω–µ—Ç:
   await redis.set('key', 'value')
   await redis.get('key')
   ```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ:

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω—É–∂–Ω–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `@upstash/redis`
2. –û–±–Ω–æ–≤–∏—Ç—å `lib/vercel/kv.ts`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ–ø–ª–æ–π
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ—Ñ–∏–ª—è
